
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Using screen to keep things running Â· LHCb analysis essentials</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-katex/katex.min.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-panels/panels.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-block-align/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="../css/website.css">
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="screen2.html" />
    
    
    <link rel="prev" href="./" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="../python/">
            
                <a href="../python/">
            
                    
                    Python
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.1" data-path="../python/running.html">
            
                <a href="../python/running.html">
            
                    
                    Running
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.2" data-path="../python/operators.html">
            
                <a href="../python/operators.html">
            
                    
                    Objects and operators
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.3" data-path="../python/numbers.html">
            
                <a href="../python/numbers.html">
            
                    
                    Numbers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.4" data-path="../python/strings.html">
            
                <a href="../python/strings.html">
            
                    
                    Strings
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.5" data-path="../python/lists.html">
            
                <a href="../python/lists.html">
            
                    
                    Lists and looping
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.6" data-path="../python/dictionaries.html">
            
                <a href="../python/dictionaries.html">
            
                    
                    Dictionaries
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.7" data-path="../python/conditions.html">
            
                <a href="../python/conditions.html">
            
                    
                    Conditions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.8" data-path="../python/methods.html">
            
                <a href="../python/methods.html">
            
                    
                    Methods
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.9" data-path="../python/scripting.html">
            
                <a href="../python/scripting.html">
            
                    
                    Scripting
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.10" data-path="../python/modules.html">
            
                <a href="../python/modules.html">
            
                    
                    Modules
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.11" data-path="../python/learning.html">
            
                <a href="../python/learning.html">
            
                    
                    Learning more
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.12" data-path="../python/first_histogram.html">
            
                <a href="../python/first_histogram.html">
            
                    
                    Making your first histogram
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.13" data-path="../python/further_reading.html">
            
                <a href="../python/further_reading.html">
            
                    
                    Further reading
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="../shell/">
            
                <a href="../shell/">
            
                    
                    Introducing the Shell
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.1" data-path="../shell/02-filedir.html">
            
                <a href="../shell/02-filedir.html">
            
                    
                    Navigating Files and Directories
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.2" data-path="../shell/03-create.html">
            
                <a href="../shell/03-create.html">
            
                    
                    Working With Files and Directories
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.3" data-path="../shell/04-pipefilter.html">
            
                <a href="../shell/04-pipefilter.html">
            
                    
                    Pipes and Filters
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.4" data-path="../shell/05-loop.html">
            
                <a href="../shell/05-loop.html">
            
                    
                    Loops
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.5" data-path="../shell/06-script.html">
            
                <a href="../shell/06-script.html">
            
                    
                    Shell Scripts
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.6" data-path="../shell/07-find.html">
            
                <a href="../shell/07-find.html">
            
                    
                    Finding Things
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="./">
            
                <a href="./">
            
                    
                    Shell extras
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="4.1.1" data-path="screen.html">
            
                <a href="screen.html">
            
                    
                    Using screen to keep things running
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.2" data-path="screen2.html">
            
                <a href="screen2.html">
            
                    
                    Advanced screen topics
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.3" data-path="persistent-screen.html">
            
                <a href="persistent-screen.html">
            
                    
                    Persistent screen or tmux session
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.4" data-path="shell2.html">
            
                <a href="shell2.html">
            
                    
                    Advanced shell topics
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="5.1" data-path="../git/">
            
                <a href="../git/">
            
                    
                    Version control with Git
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.1.1" data-path="../git/01-basics.html">
            
                <a href="../git/01-basics.html">
            
                    
                    Basics
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.2" data-path="../git/02-setup.html">
            
                <a href="../git/02-setup.html">
            
                    
                    Setting Up Git
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.3" data-path="../git/03-create.html">
            
                <a href="../git/03-create.html">
            
                    
                    Creating a Repository
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.4" data-path="../git/04-changes.html">
            
                <a href="../git/04-changes.html">
            
                    
                    Tracking Changes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.5" data-path="../git/05-history.html">
            
                <a href="../git/05-history.html">
            
                    
                    Exploring History
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.6" data-path="../git/06-ignore.html">
            
                <a href="../git/06-ignore.html">
            
                    
                    Ignoring Things
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.7" data-path="../git/07-gitlab.html">
            
                <a href="../git/07-gitlab.html">
            
                    
                    Remotes in CERN GitLab
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.8" data-path="../git/08-share.html">
            
                <a href="../git/08-share.html">
            
                    
                    Sharing a repository with others
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.9" data-path="../git/09-pullrequests.html">
            
                <a href="../git/09-pullrequests.html">
            
                    
                    Collaborating with Pull Requests
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.10" data-path="../git/10-conflict.html">
            
                <a href="../git/10-conflict.html">
            
                    
                    Conflicts
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.11" data-path="../git/11-ci.html">
            
                <a href="../git/11-ci.html">
            
                    
                    GitLab CI
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.12" data-path="../git/12-open.html">
            
                <a href="../git/12-open.html">
            
                    
                    Open Science
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.13" data-path="../git/13-licensing.html">
            
                <a href="../git/13-licensing.html">
            
                    
                    Licensing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.14" data-path="../git/14-citation.html">
            
                <a href="../git/14-citation.html">
            
                    
                    Citation
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="6.1" >
            
                <a target="_blank" href="ref://analysis-essentials.pdf">
            
                    
                    Download PDF
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Using screen to keep things running</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h2 id="using-screen-to-keep-things-running">Using screen to keep things running</h2>
<p><div class="panel panel-warning"><div class="panel-heading"><h3 class="panel-title" onclick="javascript:toggle(6935995747);" id="learning-objectives"><i class="fa fa-line-chart"></i> Learning Objectives<span id="heading-6935995747"></span></h3></div><div class="panel-body" id="panel-6935995747"><ul>
<li>Create a new <code>screen</code> session</li>
<li>Disconnect from a <code>screen</code> session</li>
<li>Reconnect to an existing <code>screen</code> session</li>
<li>End an existing <code>screen</code> session</li>
<li>Handling of Kerberos tokens</li>
</ul>
</div></div></p>
<p>Often we want to run a program for a long time on a computer we
connected to via <code>ssh</code>, like the <code>lxplus</code> machines. The <code>screen</code>
program allows you to keep programs running on the remote computer
even if you disconnect from it. For example when putting your laptop
to sleep or losing wifi.</p>
<p>Connect to <code>lxplus</code>:</p>
<pre><code class="lang-bash">$ ssh lxplus.cern.ch
</code></pre>
<p>You can start <code>screen</code> by simply typing its name:</p>
<pre><code class="lang-bash">$ screen
</code></pre>
<p>Once you do this it will look as if nothing has happened. However you
now have a fresh terminal inside what is refered to as a &quot;screen
session&quot;. Let&apos;s type some commands that generate some output:</p>
<pre><code class="lang-bash">$ uptime
</code></pre>
<pre><code class="lang-output"> 11:48:02 up 15 days, 20:36, 105 users,  load average: 2.26, 2.10, 3.16
</code></pre>
<pre><code class="lang-bash">$ date
</code></pre>
<pre><code class="lang-output">Thu Apr 16 11:48:32 CEST 2015
</code></pre>
<p>To disconnect from this session press <code>Ctrl-a d</code>. We are now back to
the terminal that we first started in. You can check that your
<code>screen</code> session is still running by typing <code>screen -list</code>, which will
list all active sessions:</p>
<pre><code class="lang-bash">$ screen -list
</code></pre>
<pre><code class="lang-output">There is a screen on:
      25593.pts-44.lxplus0234   (Detached)
1 Socket in /var/run/screen/S-thead.
</code></pre>
<p>To reconnect to the session you use <code>screen -rD</code>. When there is just
one session running (like now) then it will reconnect you to that
session. Try it and you should see the date and time output by the
<code>date</code> command we ran earlier.</p>
<p>When you have more than one session you need to provide the name of
the session as an argument to <code>screen -rD</code>. The name of the above
session is: <code>25593.pts-44.lxplus0234</code>. You can reconnect to it with:</p>
<pre><code class="lang-bash">$ screen -rD 25593.pts-44.lxplus0234
</code></pre>
<p>To end a <code>screen</code> session you are currently connected to, simply press
<code>Ctrl-d</code>. Just like you would to disconnect from a <code>ssh</code> session.</p>
<p>A <code>screen</code> session is tied to a specific computer. This means you need
to remember which computer you connected to. Even if your <code>screen</code>
session keeps running, you can only resume it from the same machine as
you started it.</p>
<p>When connecting to <code>lxplus</code> you are assigned to a random computer, but you can find out its name with <code>hostname</code>:</p>
<pre><code class="lang-bash">$ hostname
</code></pre>
<pre><code class="lang-output">lxplus0081.cern.ch
</code></pre>
<p>This tells you that the computer you are connected to is called
<code>lxplus0081.cern.ch</code>. Later on you can re-connect to exactly this
machine with:</p>
<pre><code class="lang-bash">$ ssh lxplus0081.cern.ch
</code></pre>
<p>Another complication are your kerberos tokens. These typically
expire as soon as you disconnect from a <code>lxplus</code> machine. This means
the program you left running inside the <code>screen</code> session will
suddenly not be able to write to any files in your home directory
anymore. This is particularly annoying if you are running <code>ganga</code>
in your screen session.</p>
<p>One way to stop your tokens from expiring is to type <code>kinit</code>
when you first start a new <code>screen</code> session. The tokens you get
this way will survive you disconnecting. However they will
expire after 24 hours, so you will have to type <code>kinit</code> again
to renew them if you leave <code>screen</code> running for longer than
24 hours.</p>
<pre><code class="lang-bash">$ screen
<span class="hljs-comment"># now inside the screen session</span>
$ kinit
</code></pre>
<p><div class="panel panel-primary"><div class="panel-heading"><h3 class="panel-title" onclick="javascript:toggle(4526577272);" id="tmux"><i class="fa fa-info-circle"></i> tmux<span id="heading-4526577272"></span></h3></div><div class="panel-body" id="panel-4526577272"><p><code>tmux</code> is another program you can use to keep things running remotely. 
In practice, it is very similar to screen, but it has some minor 
differences. You can find syntax guides easily online, including guides 
showing the equivalent commands in tmux and screen 
(<a href="http://hyperpolyglot.org/multiplexers" target="_blank">this one</a> is quite good), but 
here&apos;s a quick list of equivalent commands to those used in this lesson:</p>
<ul>
<li><code>tmux ls</code> instead of <code>screen -list</code></li>
<li><code>Ctrl-b d</code> to detach instead of <code>Ctrl-a d</code> (<code>tmux</code> in general uses 
<code>Ctrl-b</code> instead of <code>Ctrl-a</code>)</li>
<li><code>tmux a</code> or <code>tmux attach</code> instead of <code>screen -rD</code></li>
</ul>
</div></div></p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="./" class="navigation navigation-prev " aria-label="Previous page: Shell extras">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="screen2.html" class="navigation navigation-next " aria-label="Next page: Advanced screen topics">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Using screen to keep things running","level":"4.1.1","depth":2,"next":{"title":"Advanced screen topics","level":"4.1.2","depth":2,"path":"shell-extras/screen2.md","ref":"shell-extras/screen2.md","articles":[]},"previous":{"title":"Shell extras","level":"4.1","depth":1,"path":"shell-extras/README.md","ref":"shell-extras/README.md","articles":[{"title":"Using screen to keep things running","level":"4.1.1","depth":2,"path":"shell-extras/screen.md","ref":"shell-extras/screen.md","articles":[]},{"title":"Advanced screen topics","level":"4.1.2","depth":2,"path":"shell-extras/screen2.md","ref":"shell-extras/screen2.md","articles":[]},{"title":"Persistent screen or tmux session","level":"4.1.3","depth":2,"path":"shell-extras/persistent-screen.md","ref":"shell-extras/persistent-screen.md","articles":[]},{"title":"Advanced shell topics","level":"4.1.4","depth":2,"path":"shell-extras/shell2.md","ref":"shell-extras/shell2.md","articles":[]}]},"dir":"ltr"},"config":{"plugins":["katex","panels@git+https://github.com/lhcb/gitbook-plugin-panels.git#master","collapsible-menu","block-align","otherlink"],"styles":{"website":"css/website.css"},"pluginsConfig":{"collapsible-menu":{},"block-align":{},"search":{},"otherlink":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"panels":{},"katex":{},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"LHCb analysis essentials","gitbook":"*","description":"Material for the first half of the LHCb Starterkit. Covers the basics of Git, Python, and the UNIX shell."},"file":{"path":"shell-extras/screen.md","mtime":"2017-10-31T09:28:17.481Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2017-10-31T09:32:38.650Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-panels/panels.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-collapsible-menu/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-otherlink/js/otherlink.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

